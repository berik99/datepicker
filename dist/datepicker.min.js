/*!
  * datepicker v0.2.5
  * Copyright 2021 [object Object]
  * Licensed under MIT
  */
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}function _classPrivateMethodGet(e,t,a){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return a}var _build=new WeakSet,_show=new WeakSet,_hide=new WeakSet,_setPosition=new WeakSet,_updateCalendar=new WeakSet,_autoCloseDatapicker=new WeakSet,_applyFormat=new WeakSet,_parseDateFormat=new WeakSet,Datepicker=function(){function e(){_classCallCheck(this,e),_parseDateFormat.add(this),_applyFormat.add(this),_autoCloseDatapicker.add(this),_updateCalendar.add(this),_setPosition.add(this),_hide.add(this),_show.add(this),_build.add(this),this.classToApply="datepicker",this.language="EN",this._months=[],this._days=[],this.yearSel,this.monthSel,this.refDateTime,this.refMonth,this.refYear,this.selectedDay,this.lastSelected,this.inputReference,this.minYear=1900,this.maxYear=(new Date).getFullYear(),this.format="dd/mm/yyyy",this.datepicker,this.useCustomSelectedValue=!1,this.initialized=!1,this.setLanguage(this.language)}return _createClass(e,[{key:"init",value:function(){var e=this;document.body.appendChild(this.datepicker);for(var t=document.getElementsByClassName(this.classToApply),a=0;a<t.length;a++)"INPUT"==t[a].nodeName&&"text"==t[a].getAttribute("type")&&(t[a].readOnly=!0,t[a].style.cursor="pointer",t[a].onfocus=function(){_classPrivateMethodGet(e,_show,_show2).call(e,this)});this.initialized=!0}},{key:"setLanguage",value:function(e){if(this.initialized)throw"Can't apply settings after initialization";if(2!=e.length)throw"Only 2 characters allowed to set language";switch(this.language=this.language,e){case"IT":this._days=["LUN","MAR","MER","GIO","VEN","SAB","DOM"],this._months=["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"];break;case"EN":this._days=["MON","TUE","WED","THU","FRI","SAT","SUN"],this._months=["January","February","March","April","May","June","July","August","September","October","November","December"];break;default:console.error("This language may not exixst or is not yet implemented. Setted as default to english")}_classPrivateMethodGet(this,_build,_build2).call(this)}},{key:"setMinYear",value:function(e){if(this.initialized)throw"Can't apply settings after initialization";if(this.useCustomSelectedValue)throw"Can't set minYear after custom selected values";if("number"!=typeof e)throw"Invalid minimum year";if(e>this.maxYear)throw"Can't set minimum year uppter than maximum year(".concat(this.maxYear,")");this.minYear=e,_classPrivateMethodGet(this,_build,_build2).call(this)}},{key:"setMaxYear",value:function(e){if(this.initialized)throw"Can't apply settings after initialization";if(this.useCustomSelectedValue)throw"Can't set maxYear after custom selected values";if("number"!=typeof e)throw"Invalid maximum year";if(e<this.minYear)throw"Can't set maximum year lower than minimum year(".concat(this.minYear,")");this.maxYear=e,_classPrivateMethodGet(this,_build,_build2).call(this)}},{key:"setYearsRange",value:function(e,t){if(this.initialized)throw"Can't apply settings after initialization";if(this.useCustomSelectedValue)throw"Can't set range after custom selected values";if("number"!=typeof t||"number"!=typeof e)throw"Invalid date range";if(t<e)throw"`Can't set maximum year lower than minimum year";this.minYear=e,this.maxYear=t,_classPrivateMethodGet(this,_build,_build2).call(this)}},{key:"setDefaultDate",value:function(e,t){if(this.initialized)throw"Can't apply settings after initialization";if("number"!=typeof t&&"number"!=typeof e)throw"Invalid type. only numbers available for years and month";if(t<this.minYear||t>this.maxYear)throw"Years out of range. Current range is ".concat(this.minYear," - ").concat(this.maxYear);if(e<1||e>12)throw"Months out of range. Choose a month between 1 and 12";this.useCustomSelectedValue=!0,this.refYear=t,this.refMonth=e-1,_classPrivateMethodGet(this,_build,_build2).call(this)}},{key:"setCssClass",value:function(e){if(this.initialized)throw"Can't apply settings after initialization";if("string"!=typeof e)throw"ERROR: cssClass must be a string";this.classToApply=e}},{key:"setDateFormat",value:function(e){if(this.initialized)throw"Can't apply settings after initialization";if("string"!=typeof e)throw"ERROR: date format must be a string";if(10!=e.length||!e.includes("dd")||!e.includes("mm")||!e.includes("yyyy"))throw"ERROR: Invalid date format";this.format=e}}]),e}();function _build2(){var e=this;this.datepicker=null,this.datepicker=document.createElement("div"),this.datepicker.id="datepicker";var t=document.createElement("div");t.classList.add("input-control");var a=document.createElement("div");a.classList.add("button"),a.classList.add("reset"),a.innerHTML='<svg class="bi bi-trash" fill=currentColor height=16 viewBox="0 0 16 16" width=16 xmlns=http://www.w3.org/2000/svg><path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" /><path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z" fill-rule=evenodd /></svg>',t.appendChild(a);var s=document.createElement("div");s.onclick=function(){_classPrivateMethodGet(e,_hide,_hide2).call(e)},s.classList.add("button"),s.classList.add("_close"),s.innerHTML='<svg class="bi bi-x-lg" fill=currentColor height=14 viewBox="0 0 16 16" width=14 xmlns=http://www.w3.org/2000/svg><path d="M1.293 1.293a1 1 0 0 1 1.414 0L8 6.586l5.293-5.293a1 1 0 1 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 0 1 0-1.414z" /></svg>',t.appendChild(s),this.datepicker.appendChild(t);var i=document.createElement("div");i.classList.add("calendar-control");var l=document.createElement("div");l.classList.add("button"),l.classList.add("control"),l.classList.add("prev"),l.innerHTML='<svg class="bi bi-arrow-left-short" fill=currentColor height=26 viewBox="0 0 16 16" width=26 xmlns=http://www.w3.org/2000/svg><path d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z" fill-rule=evenodd /></svg>',i.appendChild(l),this.monthSel=document.createElement("select");for(var n=0;n<=11;n++){var r=document.createElement("option");r.value=n,r.label=this._months[n],this.monthSel.appendChild(r)}this.monthSel.tabIndex=-1,i.appendChild(this.monthSel);new Select(this.monthSel,i,"month");this.yearSel=document.createElement("select");for(var c=this.maxYear;c>=this.minYear;c--){var o=document.createElement("option");o.value=c,o.label=c,this.yearSel.appendChild(o)}this.yearSel.tabIndex=-1,i.appendChild(this.yearSel);new Select(this.yearSel,i,"year");var d=document.createElement("div");d.classList.add("button"),d.classList.add("control"),d.classList.add("next"),d.innerHTML='<svg class="bi bi-arrow-right-short" fill=currentColor height=26 viewBox="0 0 16 16" width=26 xmlns=http://www.w3.org/2000/svg><path d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z" fill-rule=evenodd /></svg>',i.appendChild(d),this.datepicker.appendChild(i);var h=document.createElement("div");h.classList.add("calendar");var u=document.createElement("div");u.classList.add("cal-row"),u.classList.add("header");for(var p=0;p<7;p++){var m=document.createElement("div");m.classList.add("button"),m.classList.add("cell"),m.classList.add("hcell"),m.innerHTML=this._days[p],u.appendChild(m)}h.appendChild(u),h.appendChild(document.createElement("hr")),document.createElement("div").classList.add("cal-row");for(var v=0;v<6;v++){var f=document.createElement("div");f.classList.add("cal-row");for(var y=0;y<7;y++){var g=document.createElement("div");g.classList.add("button"),g.classList.add("cell"),g.classList.add("rcell"),f.appendChild(g)}h.appendChild(f)}this.datepicker.appendChild(h),a.onclick=function(){e.yearSel.value=e.refYear,e.monthSel.value=e.refMonth,e.monthSel.dispatchEvent(new Event("change")),e.yearSel.dispatchEvent(new Event("change")),e.selectedDay=null,null!=e.lastSelected&&e.lastSelected.classList.remove("selected"),e.inputReference.value=null,e.lastSelected=null,_classPrivateMethodGet(e,_updateCalendar,_updateCalendar2).call(e)},d.onclick=function(){e.yearSel.value>=e.maxYear&&"11"===e.monthSel.value||("11"===e.monthSel.value?(e.monthSel.value=0,e.yearSel.value++,e.yearSel.dispatchEvent(new Event("change"))):e.monthSel.value++,e.monthSel.dispatchEvent(new Event("change")))},l.onclick=function(){e.yearSel.value<=e.minYear&&"0"===e.monthSel.value||("0"===e.monthSel.value?(e.monthSel.value=11,e.yearSel.value--,e.yearSel.dispatchEvent(new Event("change"))):e.monthSel.value--,e.monthSel.dispatchEvent(new Event("change")))},this.monthSel.onchange=function(){_classPrivateMethodGet(e,_updateCalendar,_updateCalendar2).call(e)},this.yearSel.onchange=function(){_classPrivateMethodGet(e,_updateCalendar,_updateCalendar2).call(e)},this.datepicker.addEventListener("change",(function(){h.classList.remove("animate"),console.log("ciao"),h.classList.add("animate")}))}function _show2(e){var t=this;this.useCustomSelectedValue||(this.refMonth=this.maxYear==(new Date).getFullYear()?(new Date).getMonth():0,this.refYear=this.maxYear),this.lastSelected=null,this.inputReference=e,window.onresize=function(){_classPrivateMethodGet(t,_setPosition,_setPosition2).call(t)},window.onclick=function(e){_classPrivateMethodGet(t,_autoCloseDatapicker,_autoCloseDatapicker2).call(t,e)},""!=this.inputReference.value?(this.selectedDay=_classPrivateMethodGet(this,_parseDateFormat,_parseDateFormat2).call(this,e.value),this.yearSel.value=this.selectedDay.getFullYear(),this.monthSel.value=this.selectedDay.getMonth(),this.yearSel.dispatchEvent(new Event("change"))):(this.selectedDay=null,this.yearSel.value=this.refYear,this.monthSel.value=this.refMonth,this.yearSel.dispatchEvent(new Event("change"))),_classPrivateMethodGet(this,_setPosition,_setPosition2).call(this),this.datepicker.style.display="block"}function _hide2(){this.datepicker.style.display="none"}function _setPosition2(){var e=this.inputReference.getBoundingClientRect();this.datepicker.style.top="".concat(e.top+this.inputReference.offsetHeight+10,"px"),this.datepicker.style.left="".concat(e.left+this.datepicker.style.width,"px")}function _updateCalendar2(){for(var e=this,t=[31,28,31,30,31,30,31,31,30,31,30,31],a=this.datepicker.getElementsByClassName("rcell"),s=new Date(this.yearSel.value,this.monthSel.value,1).getDay(),i=0;i<a.length;i++)a[i].innerHTML="",a[i].classList.remove("today"),a[i].classList.remove("selected"),a[i].classList.add("unavailable"),a[i].onclick=null,a[i].value="";for(var l=0==s?6:s-1,n=0!=this.monthSel.value?t[this.monthSel.value-1]:11,r=0!=s?s-2:5;r>=0;r--)a[r].innerHTML=n,n--;for(var c=isLeap(this.yearSel.value)?t[this.monthSel.value]+1:t[this.monthSel.value],o=function(t){a[l].classList.remove("unavailable");var s=e;a[l].onclick=function(){this!=s.lastSelected&&(null!=s.lastSelected&&s.lastSelected.classList.remove("selected"),this.classList.add("selected"),s.selectedDay=_classPrivateMethodGet(s,_parseDateFormat,_parseDateFormat2).call(s,this.value),s.inputReference.value=this.value,s.lastSelected=this,_classPrivateMethodGet(s,_hide,_hide2).call(s))},a[l].innerHTML=t;var i=parseInt(e.monthSel.value)+1,n=t;a[l].value=_classPrivateMethodGet(e,_applyFormat,_applyFormat2).call(e,n,i,e.yearSel.value),l++},d=1;d<=c;d++)o(d);var h=new Date;this.monthSel.value==h.getMonth()&&this.yearSel.value==h.getFullYear()&&a[h.getDate()+s-2].classList.add("today"),null!=this.selectedDay&&this.monthSel.value==this.selectedDay.getMonth()&&this.yearSel.value==this.selectedDay.getFullYear()&&a[this.selectedDay.getDate()+s-2].classList.add("selected");for(var u=1;l<a.length;l++)a[l].innerHTML=u,u++;this.datepicker.dispatchEvent(new Event("change"))}function _autoCloseDatapicker2(e){if(!isExplorer()){var t=this.datepicker.getBoundingClientRect().x,a=t+this.datepicker.getBoundingClientRect().width,s=this.datepicker.getBoundingClientRect().y,i=s+this.datepicker.getBoundingClientRect().height,l=this.inputReference.getBoundingClientRect().x,n=l+this.inputReference.getBoundingClientRect().width,r=this.inputReference.getBoundingClientRect().y,c=r+this.inputReference.getBoundingClientRect().height;isInside(e.clientX,e.clientY,t,a,s,i)||isInside(e.clientX,e.clientY,l,n,r,c)||e.target!=this.yearSel&&e.target!=this.monthSel&&_classPrivateMethodGet(this,_hide,_hide2).call(this)}}function _applyFormat2(e,t,a){return t<10&&(t="0".concat(t)),e<10&&(e="0".concat(e)),this.format.replace("dd",e).replace("mm",t).replace("yyyy",a)}function _parseDateFormat2(e){var t=this.format.replace("dd","").replace("mm","").replace("yyyy","")[0],a=this.format.split(t),s=e.split(t);return new Date(parseInt(s[a.indexOf("yyyy")]),parseInt(s[a.indexOf("mm")])-1,parseInt(s[a.indexOf("dd")]))}var _build3=new WeakSet,_updateReferenceSelect=new WeakSet,_updateFromOption=new WeakSet,_updateFromReference=new WeakSet,_openSelect=new WeakSet,_closeAllSelect=new WeakSet,Select=function e(t,a,s){_classCallCheck(this,e),_closeAllSelect.add(this),_openSelect.add(this),_updateFromReference.add(this),_updateFromOption.add(this),_updateReferenceSelect.add(this),_build3.add(this);var i=this;if("SELECT"!=t.nodeName)throw"HTMLElementError: only select elements are allowed";this.referenceSelect=t,this.referenceSelect.addEventListener("change",(function(){_classPrivateMethodGet(i,_updateFromReference,_updateFromReference2).call(i)})),this.className=s,this.optionsNames=[],this.optionsValues=[];for(var l=0;l<t.options.length;l++)this.optionsNames.push(t.options[l].label),this.optionsValues.push(t.options[l].value);this.select,this.selectValue,this.selectArrow,_classPrivateMethodGet(this,_build3,_build4).call(this),this.referenceSelect.style.display="none",_classPrivateMethodGet(this,_updateFromReference,_updateFromReference2).call(this),a.appendChild(this.select)};function _build4(){var e=this;this.select=document.createElement("div"),this.select.classList.add("custom-dp-select"),this.select.classList.add("closesel"),this.select.classList.add(this.className);var t=document.createElement("div");t.classList.add("select-value-container"),t.style.display="flex",this.selectValue=document.createElement("div"),this.selectValue.classList.add("select-value"),t.onclick=function(t){t.stopImmediatePropagation(),_classPrivateMethodGet(e,_openSelect,_openSelect2).call(e)},document.onclick=function(t){_classPrivateMethodGet(e,_closeAllSelect,_closeAllSelect2).call(e,t)},this.selectArrow=document.createElement("div"),this.selectArrow.classList.add("select-arrow"),this.selectArrow.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>',t.appendChild(this.selectValue),t.appendChild(this.selectArrow),this.select.appendChild(t);var a=document.createElement("div");a.classList.add("select-options");for(var s=0;s<this.optionsValues.length;s++){var i=document.createElement("div");i.classList.add("select-option"),i.innerHTML=this.optionsNames[s],i.value=this.optionsValues[s],i.onclick=function(){_classPrivateMethodGet(e,_updateFromOption,_updateFromOption2).call(e,this)},a.appendChild(i)}this.select.appendChild(a)}function _updateReferenceSelect2(){this.referenceSelect.value=this.selectValue.value,this.referenceSelect.dispatchEvent(new Event("change"))}function _updateFromOption2(e){this.selectValue.innerHTML=e.innerHTML,this.selectValue.value=e.value,this.select.getElementsByClassName("select-selected")[0].classList.remove("select-selected"),e.classList.add("select-selected"),_classPrivateMethodGet(this,_updateReferenceSelect,_updateReferenceSelect2).call(this)}function _updateFromReference2(){this.selectValue.innerHTML=this.referenceSelect.options[this.referenceSelect.selectedIndex].label,this.selectValue.value=this.referenceSelect.value;var e=this.select.getElementsByClassName("select-selected")[0];void 0!==e&&e.classList.remove("select-selected"),this.select.getElementsByClassName("select-option")[this.referenceSelect.selectedIndex].classList.add("select-selected")}function _openSelect2(){_classPrivateMethodGet(this,_closeAllSelect,_closeAllSelect2).call(this,this.select),this.select.classList.contains("closesel")?(this.select.classList.replace("closesel","open"),this.selectArrow.style.transform="rotate(180deg)"):(this.select.classList.replace("open","closesel"),this.selectArrow.style.transform="rotate(0)")}function _closeAllSelect2(e){for(var t=document.getElementsByClassName("open"),a=0;a<t.length;a++)t[a]!=e&&(t[a].getElementsByClassName("select-arrow")[0].style.transform="rotate(0)",t[a].classList.replace("open","closesel"))}function isLeap(e){return 29===new Date(e,1,29).getDate()}function isInside(e,t,a,s,i,l){return e>a&&e<s&&t>i&&t<l}function isExplorer(){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),a=e.indexOf("Trident/");return t>0||a>0}